/*! EcafeFurniture 02-07-2014 04:07 */
window.Sui||(Sui={version:"1.0"}),Sui.apply=function(a,b){if(a&&b&&"object"==typeof b)for(var c in b)a[c]=b[c];return a},function(){var a=Object.prototype.toString,b=navigator.userAgent.toLowerCase(),c=function(a){return a.test(b)},d=document,e="CSS1Compat"==d.compatMode,f=c(/opera/),g=c(/chrome/),h=c(/webkit/),i=!g&&c(/safari/),j=i&&c(/applewebkit\/4/),k=i&&c(/version\/3/),l=i&&c(/version\/4/),m="CollectGarbage"in window,n=m&&c(/msie 7/),o=m&&c(/msie 8/),p=m&&!n&&!o,q=!h&&c(/gecko/),r=q&&c(/rv:1\.8/),s=q&&c(/rv:1\.9/),t=c(/windows|win32/),u=c(/macintosh|mac os x/),v=(c(/adobeair/),c(/linux/)),w=/^https/i.test(window.location.protocol);if(p)try{d.execCommand("BackgroundImageCache",!1,!0)}catch(x){}Sui.apply(Sui,{isStrict:e,isSecure:w,applyIf:function(a,b){if(a)for(var c in b)Sui.isDefined(a[c])||(a[c]=b[c]);return a},removeProperties:function(a,b){if(Sui.isObject(a)&&Sui.isNotEmpty(b))for(var c=0;c<b.length;c++)delete a[b[c]]},extend:function(){var a=function(a){for(var b in a)this[b]=a[b]},b=Object.prototype.constructor;return function(c,d,e){Sui.isObject(d)&&(e=d,d=c,c=e.constructor!=b?e.constructor:function(){d.apply(this,arguments)});var f,g=function(){},h=d.prototype;return g.prototype=h,f=c.prototype=new g,f.constructor=c,c.superclass=h,h.constructor==b&&(h.constructor=d),c.override=function(a){Sui.override(c,a)},f.superclass=f.supr=function(){return h},f.override=a,Sui.override(c,e),c.extend=function(a){return Sui.extend(c,a)},c}}(),override:function(a,b){if(b){var c=a.prototype;Sui.apply(c,b),Sui.isIE&&b.hasOwnProperty("toString")&&(c.toString=b.toString)}},namespace:function(){var a,b;return Sui.each(arguments,function(c){b=c.split("."),a=window[b[0]]=window[b[0]]||{},Sui.each(b.slice(1),function(b){a=a[b]=a[b]||{}})}),a},urlEncode:function(a,b){var c,d=[],e=encodeURIComponent;return Sui.iterate(a,function(a,b){c=Sui.isEmpty(b),Sui.each(c?a:b,function(b){d.push("&",e(a),"=",Sui.isEmpty(b)||b==a&&c?"":Sui.isDate(b)?Sui.encode(b).replace(/"/g,""):e(b))})}),b||(d.shift(),b=""),b+d.join("")},urlDecode:function(a,b){if(Sui.isEmpty(a))return{};var c,d,e={},f=a.split("&"),g=decodeURIComponent;return Sui.each(f,function(a){a=a.split("="),c=g(a[0]),d=g(a[1]),e[c]=b||!e[c]?d:[].concat(e[c]).concat(d)}),e},each:function(a,b,c){if(!Sui.isEmpty(a,!0)){Sui.isPrimitive(a)&&(a=[a]);for(var d=0,e=a.length;e>d;d++)if(b.call(c||a[d],a[d],d,a)===!1)return d}},iterate:function(a,b,c){if(!Sui.isEmpty(a)&&Sui.isObject(a))for(var d in a)if(a.hasOwnProperty(d)&&b.call(c||a,d,a[d],a)===!1)return},isEmpty:function(a,b){return null===a||void 0===a||Sui.isArray(a)&&!a.length||(b?!1:""===a)},isNotEmpty:function(){return!this.isEmpty.apply(this,arguments)},isArray:function(b){return"[object Array]"===a.apply(b)},isDate:function(b){return"[object Date]"===a.apply(b)},isObject:function(a){return!!a&&"[object Object]"===Object.prototype.toString.call(a)},isPrimitive:function(a){return Sui.isString(a)||Sui.isNumber(a)||Sui.isBoolean(a)},isFunction:function(b){return"[object Function]"===a.apply(b)},isNumber:function(a){return"number"==typeof a&&isFinite(a)},isString:function(a){return"string"==typeof a},isBoolean:function(a){return"boolean"==typeof a},isDefined:function(a){return"undefined"!=typeof a},isOpera:f,isWebKit:h,isChrome:g,isSafari:i,isSafari3:k,isSafari4:l,isSafari2:j,isIE:m,isIE6:p,isIE7:n,isIE8:o,isGecko:q,isGecko2:r,isGecko3:s,isLinux:v,isWindows:t,isMac:u,getDomWidth:function(a){var a=$(a);return parseFloat(a.css("paddingLeft"))+parseFloat(a.css("paddingRight"))+(parseFloat(a[0].style.borderLeftWidth)||0)+(parseFloat(a[0].style.borderRightWidth)||0)+a.width()},getDomHeight:function(a){var a=$(a);return parseFloat(a.css("paddingTop"))+parseFloat(a.css("paddingBottom"))+(parseFloat(a[0].style.borderTopWidth)||0)+(parseFloat(a[0].style.borderBottomWidth)||0)+a.height()},getDomPaddingV:function(a){var b=$("#"+a);return b.length?parseFloat(b.css("paddingTop"))+parseFloat(b.css("paddingBottom"))+(parseFloat(b.css("borderTopWidth"))||parseFloat(b[0].style.borderTopWidth)||0)+(parseFloat(b.css("borderBottomWidth"))||parseFloat(b[0].style.borderBottomWidth)||0):0}})}(),Sui.namespace("Sui.util"),Sui.util.ArrayList=function(){var a=[];return Sui.apply(this,{exchangeElement:function(b,c){Sui.ArrayUtil.exchangeElement(a,b,c)},indexOf:function(b){return Sui.ArrayUtil.indexOf(a,b)},add:function(b,c){Sui.ArrayUtil.add(a,b,c)},remove:function(b){Sui.ArrayUtil.remove(a,b)},addAll:function(b){Sui.ArrayUtil.addAll(a,b)},count:function(){return a.length},size:function(){return this.count()},get:function(b){return a[b]}}),this},Sui.util.DelayedTask=function(a,b,c){var d=null,e=function(){d=null,a.apply(b,c||[])};this.delay=function(f,g,h,i){d&&this.cancel(),a=g||a,b=h||b,c=i||c,d||(d=setTimeout(e,f))},this.cancel=function(){d&&(clearTimeout(d),d=null)}},Sui.util.Observable=function(a){this.events={},a&&a.listeners&&this.addListeners(a.listeners)},Sui.util.Observable.prototype={events:null,fireEvent:function(a,b){b=b||{},a=a.toLowerCase(),Sui.applyIf(b,{target:this});var c=this.getListeners(a);if(c)for(var d=0;d<c.length;d++){var e=c[d],f=e.fn.call(e.scope,b);if(f===!1)return!1}},getListeners:function(a){return this.events[a]},addListeners:function(a){for(var b in a){var c=a[b];this.addListener(b,c)}},containListener:function(a,b,c){var d=this.events[a];if(d)for(var e=0;e<d.length;e++)if(d[e].fn==b&&d[e].scope==c)return!0;return!1},addListener:function(eventName,fn,scope){eventName=eventName.toLowerCase();var listeners=this.events[eventName];listeners||(listeners=[],this.events[eventName]=listeners),Sui.isString(fn)&&(fn=eval(fn)),listeners.push({fn:fn,scope:scope})},removeListener:function(a,b,c){a=a.toLowerCase();var d=this.getListeners(a);if(d)for(var e=0;e<d.length;e++){var f=d[e];if(f.fn==b&&f.scope==c){Sui.ArrayUtil.removeByIndex(d,e);break}}},clearListeners:function(){this.events={}},broadcastObjectEvent:function(a,b){var c=this;a.addListener(b,function(a){c.fireEvent(b,a)})}},Sui.util.Observable.prototype.on=Sui.util.Observable.prototype.addListener,Sui.util.Observable.prototype.un=Sui.util.Observable.prototype.removeListener,Sui.util.Event=function(a,b){2==arguments.length?(this.target=a,this.data=b):1==arguments.length&&Sui.apply(this,a)},Sui.applyIf(Sui,{parseFloat:function(a,b){return b&&Sui.isEmpty(a)?0:parseFloat(a)},evalJSON:function(a){return $.evalJSON(a)},toJSON:function(a){return $.toJSON(a)},JSONStringify:function(a){if(window.JSON)return JSON.stringify(a);var b=typeof a;if("object"!=b||null===a)return"string"==b&&(a='"'+a+'"'),String(a);var c,d,e=[],f=a&&a.constructor==Array,g=arguments.callee;for(c in a)d=a[c],b=typeof d,a.hasOwnProperty(c)&&("string"==b?d='"'+d+'"':"object"==b&&null!==d&&(d=g(d)),e.push((f?"":'"'+c+'":')+String(d)));return(f?"[":"{")+String(e)+(f?"]":"}")},nullTo0:function(a){return Sui.isUndefinedOrNull(a)?0:a},makeFunction:function(a,b){return function(){Sui.isFunction(b)||(b=a[b]),Sui.isFunction(b)?b.apply(a,arguments):Sui.warnFormat("makeFunction生成函数失败,object为{0},methodName为{1}",a,b)}},emptyFn:function(){},shouldOverridedFn:function(){throw new Error("不支持该操作")},isNotEmpty:function(a){return void 0!==a&&null!==a&&""!==a},nullToEmpty:function(a){return Sui.isDefined(a)&&null!=a?a:""},isDefinedAndNotNull:function(a){return!this.isUndefinedOrNull(a)},isUndefinedOrNull:function(a){return this.isUndefined(a)||null==a},isUndefined:function(a){return!this.isDefined(a)},applyOtherProps:function(a,b,c){if(b)for(var d in b)Sui.ArrayUtil.contains(c,d)||(a[d]=b[d]);return a},applyProps:function(a,b,c){if(b&&c)for(var d=0;d<c.length;d++){var e=c[d];Sui.isDefined(b[e])&&(a[e]=b[e])}return a},isStringPropertiesEquals:function(a,b){if(Sui.isUndefinedOrNull(a)&&Sui.isUndefinedOrNull(b))return!0;for(var c in a){var d=a[c];if(Sui.isString(d)&&b[c]!==d)return!1}for(var c in b){var d=b[c];if(Sui.isString(d)&&a[c]!==d)return!1}return!0},nextId:function(){var a=0;return function(){return++a}}()}),Math.div=function(a,b){return Math.floor(a/b)},Math.mod=function(a,b){return a-Math.floor(a/b)*b},Sui.StackUtil={pop:function(a){var b=a[a.length-1];return Sui.ArrayUtil.removeByIndex(a,a.length-1),b},peek:function(a){return a[a.length-1]},push:function(a,b){a.push(b)}},Sui.ArrayUtil={findFirstSameObject:function(a,b){function c(a,c){for(var d=0;d<b.length;d++){var e=b[d];if(a[e]!=c[e])return!1}return!0}for(var d=0;d<a.length;d++)for(var e=a[d],f=d+1;f<a.length;f++){var g=a[f];if(c(e,g))return[d,f]}},findObjectInArray:function(a,b,c){var d=null;return Sui.each(a,function(a){return a[b]==c?(d=a,!1):void 0}),d},sumInt:function(a){var b="";return Sui.each(a,function(a){Sui.isEmpty(a)||(""==b&&(b=0),b+=parseInt(a))}),b},sumFloat:function(a){var b="";return Sui.each(a,function(a){Sui.isEmpty(a)||(""==b&&(b=0),b+=parseFloat(a))}),Sui.isNumber(b)?Math.round(100*b)/100:""},addAll:function(a,b){Sui.each(b,function(b){Sui.ArrayUtil.add(a,b)})},removeAll:function(a,b){Sui.each(b,function(b){Sui.ArrayUtil.remove(a,b)})},itemToArray:function(a){return Sui.isArray(a)?a:[a]},exchangeElement:function(a,b,c){var d=a[c];this.removeByIndex(a,c);var e=a[b];this.removeByIndex(a,b),this.add(a,d,b),this.add(a,e,c)},moveToLast:function(a,b){this.remove(a,b),a.push(b)},add:function(a,b,c){Sui.isDefined(c)?a.splice(c,0,b):a.push(b)},removeByIndex:function(a,b){b>=0&&b<a.length&&a.splice(b,1)},removeAfter:function(a,b){for(var c=b+1;c<a.length;c++)this.removeByIndex(a,c)},combine:function(a,b,c){for(var d=0,e=b.length;e>d;d++)c?a.include(b[d]):a.push(b[d]);return a},contains:function(a,b,c){c=c||0;for(var d=c;d<a.length;d++)if(a[d]==b)return!0;return!1},sort:function(a,b){for(var c="desc"==b,d=0;d<a.length-1;d++){for(var e=d,f=d+1;f<a.length;f++)c?a[f]>a[e]&&(e=f):a[f]<a[e]&&(e=f);if(d!=e){var g=a[d];a[d]=a[e],a[e]=g}}return a},sortByProperty:function(a,b,c){for(var d="desc"==c,e=0;e<a.length-1;e++){for(var f=e,g=e+1;g<a.length;g++)d?a[g][b]>a[f][b]&&(f=g):a[g][b]<a[f][b]&&(f=g);if(e!=f){var h=a[e];a[e]=a[f],a[f]=h}}return a},getLast:function(a){return a.length?a[a.length-1]:null},removeLast:function(a){if(a.length>0){var b=a[a.length-1];return a.length=a.length-1,b}return null},indexOf:function(a,b){var c=-1;return Sui.each(a,function(a,d){return a==b?(c=d,!1):void 0}),c},getPropertyValues:function(a,b){var c=[];if(a)for(var d=0;d<a.length;d++){var e=a[d][b];c.push(e)}return c},remove:function(a,b){var c=this.indexOf(a,b);this.removeByIndex(a,c)},include:function(a,b){return a.contains(b)||a.push(b),a},copy:function(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return b},groupByProperty:function(a,b){for(var c={},d=0;d<a.length;d++){var e=a[d],f=e[b],g=c[f];Sui.isArray(g)||(g=[],c[f]=g),g.push(e)}return c}},Sui.Range=function(a,b){this.startValue=a,this.endValue=b},Sui.extend(Sui.Range,{containSome:function(a,b){return this.startValue<=a&&a<=this.endValue||this.endValue<=b&&b<=this.endValue}}),Sui.DateUtil={maxDate:function(a,b){return a?b?a.getTime()>b.getTime()?a:b:a:b},setMonth:function(a,b){var c=a.getDate();a.setDate(1),a.setMonth(b);var d=a.getMonth();a.setDate(c);var e=a.getMonth();e!=d&&(a.setDate(1),a.setMonth(d))},parseDate:function(a){a=a.replace(/-/g,"/");var b=new Date(a);return b},convertStrToDate:function(a,b){if(!Sui.isString(b))return this.parseDate(a);var c=b.replace(/y+/g,"([0-9]+)").replace(/M+/g,"(1[012]|0?[0-9])").replace(/d+/g,"([1-9][0-9]|0?[0-9])").replace(/h+/g,"([0-1]?[0-9]|2[0-3])").replace(/m+/g,"([0-5]?[0-9])").replace(/s+/g,"([0-5]?[0-9])"),d=a.match(new RegExp("^"+c+"$"));if(d&&d.length){d.shift();for(var e=b.match(/y+|M+|d+|h+|m+|s+/g),f={},g=0,h=e.length;h>g;g++)f[e[g]]=d[g];var i=new Date,j=f.yyyy||f.yy+2e3||i.getFullYear(),k=(f.MM||f.M||i.getMonth()+1)-1,l=f.dd||f.d||i.getDate(),m=f.hh||f.h||i.getHours(),n=f.mm||f.m||i.getMinutes(),o=f.ss||f.s||i.getSeconds();return i.setFullYear(j,k,l),i.setHours(m,n,o),i}return Sui.isString(a)?this.parseDate(a):void 0},getYM:function(a){return[a.getFullYear(),a.getMonth()]},getYMD:function(a){return[a.getFullYear(),a.getMonth(),a.getDate()]},compareYearMonth:function(a,b){return this.compareDate(this.getYM(a),this.getYM(b))},compareYMD:function(a,b){return this.compareDate(this.getYMD(a),this.getYMD(b))},compareDate:function(a,b){for(var c=0;c<a.length;c++){if(a[c]>b[c])return 1;if(a[c]<b[c])return-1}return 0},formatTime:function(a,b){var c={"h+":a[0],"m+":a[1],"s+":a[2]};for(var d in c)new RegExp("("+d+")").test(b)&&(b=b.replace(RegExp.$1,1==RegExp.$1.length?c[d]:("00"+c[d]).substr((""+c[d]).length)));return b},format:function(a,b){var c={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in c)new RegExp("("+d+")").test(b)&&(b=b.replace(RegExp.$1,1==RegExp.$1.length?c[d]:("00"+c[d]).substr((""+c[d]).length)));return b},addYears:function(a,b){return this.addMonths(a,12*b)},addMonths:function(a,b){var c=a.getDate();return a.setDate(1),a.setMonth(a.getMonth()+b),a.setDate(Math.min(c,this.getDaysInMonth(a))),a},calcYearMonth:function(a,b,c){var d=Math.mod(b+c-1,12)+1,e=a+Math.div(b+c-1,12);return[e,d]},isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getFirstDateOfMonth:function(a){var b=new Date(a);return b.setDate(1),b},getDaysInMonth:function(a,b){if(!Sui.isNumber(a)){var c=a;a=c.getFullYear(),b=c.getMonth()}return[31,this.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},getInterval:function(a,b){var c=a-b,d=Math.floor(c/36e5),e=Math.floor((c-36e5*d)/6e4),f=(c-36e5*d-6e4*e)/1e3,g=c-36e5*d-6e4*e-1e3*n;return{h:d,m:e,s:f,ms:g}},cloneDate:function(a){return a instanceof Date?new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds()):a}},Sui.NumberUtil={round:function(a,b){return b=Math.pow(10,b||0).toFixed(0>b?-b:0),Math.round(a*b)/b},isOdd:function(a){return 1==Math.mod(a,2)},isEven:function(a){return 0==Math.mod(a,2)},extractInts:function(a){for(var b=a.match(/\d+/g),c=[],d=0;d<b.length;d++)c.push(parseInt(b[d]));return c},extractInt:function(a){var b=this.extractInts(a);return b[0]},getDecimalDigits:function(a){var b=a+"",c=b.indexOf(".");return 0>c?0:b.length-1-c},fixedNumberString:function(a,b){var c=a+"",d=c.indexOf(".");return d>=0&&(c=c.substring(0,d+b+1)),c},fixNumber:function(a,b){return parseFloat(this.fixedNumberString(a+"",b))},min:function(a){var b=Number.MAX_VALUE;return Sui.each(a,function(a){b=Math.min(b,a)}),b},max:function(a){var b=Number.MIN_VALUE;return Sui.each(a,function(a){b=Math.max(b,a)}),b},containment:function(a,b,c){return Sui.isArray(b)&&(c=b[1],b=b[0]),b>a?b:a>c?c:a}},Sui.StringUtil={nullToEmpty:function(a){return Sui.isDefined(a)&&null!=a?a:""},removeChar:function(a,b,c){for(var d="",e=0,f=0;f<a.length;f++){var g=a.charAt(f);g===b?(e++,c>=e&&(d+=g)):d+=g}return d},formatByNumber:function(a){if(0==arguments.length)return"";var b=Array.prototype.slice.call(arguments,1);return a.replace(/\{(\d+)\}/g,function(a,c){var d=b[c];return Sui.isUndefinedOrNull(d)&&(d=""),d})},format:function(a,b){return a.replace(/\{([A-Za-z_]+)\}/g,function(a,c){return b[c]})},contains:function(a,b){return-1!=a.indexOf(b)},trim:function(a,b){return Sui.isUndefinedOrNull(a)?b?"":a:String(a).replace(/^\s+|\s+$/g,"")},endsWith:function(a,b){if(Sui.isUndefinedOrNull(a))return!1;var c=a.length-b.length;return c>=0&&a.lastIndexOf(b)===c},startWith:function(a,b){return Sui.isUndefinedOrNull(a)?!1:0==a.indexOf(b)},getLastChars:function(a,b){return a.substring(a.length-b)},countNotSame:function(a){for(var b={},c=0,d=0;d<a.length;d++){var e=a[d];b[e]||(c+=1,b[e]=!0)}return c},removeSame:function(a){for(var b={},c=[],d=0;d<a.length;d++){var e=a[d];b[e]||(c.push(e),b[e]=!0)}return c},nullToEmpty:function(a){return Sui.isUndefinedOrNull(a)?"":""+a},removeStart:function(a,b,c){return this.startWith(a,b)?(a=a.substring(b.length),c?this.removeStart(a,b,c):a):a},removeEnd:function(a,b){return this.endsWith(a,b)?a.substring(0,a.length-b.length):a},upperFirstChar:function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}},Sui.util.HashSet=function(){this.data={}},Sui.util.HashSet.prototype={data:null,contains:function(a){return 1==this.data[a]},add:function(a){this.data[a]=!0},remove:function(a){delete data[a]}},Sui.namespace("Sui.data"),Sui.data.TreeNodeMoveType={BEFORE:"before",ADD_CHILD:"addChildNode",AFTER:"after"},Sui.data.TreeNode=Sui.extend(Object,{parentNode:null,children:null,data:null,childrenComparator:null,constructor:function(a){Sui.data.TreeNode.superclass.constructor.call(this,a),Sui.applyProps(this,a,["parentNode","children","data","childrenComparator"])},setChildrenComparator:function(a){Sui.logFormat("设置节点的childrenComparator={0}",null==a?null:"不为null"),this.childrenComparator=a},isLeaf:function(){return!this.children||0==this.children.length},getData:function(){return this.data},setData:function(a){this.data=a,this.changeNodePositionIfNeed()},changeNodePositionIfNeed:function(){var a=this.getParentNode();if(a){var b=a.indexOf(this);a.sortChildNodes();var c=a.indexOf(this);c!=b&&this.onPositionChanged({oldPosition:b,newPosition:c})}},isLastPosition:function(a){return a==this.getParentNode().getChildNodeCount()-1},onPositionChanged:Sui.emptyFunction,isRoot:function(){return Sui.isUndefinedOrNull(this.parentNode)},removeChildNode:function(a){null!=this.children&&Sui.ArrayUtil.remove(this.children,a)},sortChildNodes:function(){this.children&&this.children.sort(Sui.isDefinedAndNotNull(this.childrenComparator)?this.childrenComparator:function(a,b){var c=a.existChild()?-1:0,d=b.existChild()?-1:0;return c-d})},addChildNode:function(a,b){(null==this.children||0==this.children.length)&&(this.children=[]),this.childrenComparator?(b=this.findInsertIndex(a),Sui.logFormat("添加孩子节点,根据childrenComparator找到节点位置{0}",b)):(Sui.logFormat("该节点的没有childrenComparator"),Sui.isUndefined(b)&&(b=this.getChildNodeCount())),Sui.ArrayUtil.add(this.children,a,b),a.setParentNode(this)},findInsertIndex:function(a){for(var b=0;b<this.getChildNodeCount();b++){var c=this.getChildNode(b);if(this.childrenComparator(c,a)>=0)return b}return this.getChildNodeCount()},before:function(a){var b=this.getIndexInParent();this.getParentNode().addChildNode(a,b)},after:function(a){var b=this.getIndexInParent();this.getParentNode().addChildNode(a,b+1)},moveNode:function(a,b){if(b==Sui.data.TreeNodeMoveType.ADD_CHILD){if(a.getParentNode()!=this){var c=a.getParentNode();c.removeChildNode(a),this.addChildNode(a)}}else if(b==Sui.data.TreeNodeMoveType.BEFORE&&a.getNextSibling!=this){var c=a.getParentNode();c.removeChildNode(a),this.before(a)}if(b==Sui.data.TreeNodeMoveType.AFTER&&a.getPrevSibling()!=this){var c=a.getParentNode();c.removeChildNode(a),this.after(a)}},getChildNode:function(a){return this.children[a]},isLastChild:function(){return!this.getNextSibling()},getNextSibling:function(){return this.isRoot()?null:this.parentNode.getNextChildNode(this)},getPrevSibling:function(){return this.isRoot()?null:this.parentNode.getPrevChildNode(this)},getLastChild:function(){return this.existChild()?this.children[this.children.length-1]:void 0},getFirstChild:function(){return this.existChild()?this.children[0]:void 0},existChild:function(){return this.getChildNodeCount()>0},getChildNodeCount:function(){return this.children?this.children.length:0},existChildNodeNameEquals:function(a){for(var b=0;b<this.getChildNodeCount();b++){var c=this.getChildNode(b);if(c.getNodeText()==a)return!0}return!1},existSiblingNameEquals:function(a){var b=this.getParentNode();if(b)for(var c=0;c<b.getChildNodeCount();c++){var d=b.getChildNode(c);if(d!=this&&d.getNodeText()==a)return!0}return!1},getNextChildNode:function(a){var b=this.indexOf(a);return-1==b?null:b+1==this.getChildNodeCount()?null:this.getChildNode(b+1)},getPrevChildNode:function(a){var b=this.indexOf(a);return-1==b?null:0>b-1?null:this.getChildNode(b-1)},getIndexInParent:function(){return this.getParentNode().indexOf(this)},indexOf:function(a){for(var b=0;b<this.getChildNodeCount();b++)if(this.getChildNode(b)==a)return b;return-1},setParentNode:function(a){this.parentNode=a},getParentNode:function(){return this.parentNode},getRoot:function(){return this.isRoot()?this:this.getParentNode().getRoot()},findNodeByAttr:function(a,b){var c=null;return this.preorderTraversal(Sui.isArray(a)&&a.length>0?function(d){for(var e=!0,f=0;f<a.length;f++)if(d[a[f]]!=b[f]){e=!1;break}return e?(c=d,!1):void 0}:function(d){return d[a]==b?(c=d,!1):void 0}),c},findNodesByAttr:function(a,b){var c=[];return this.preorderTraversal(function(d){d[a]==b&&c.push(d)}),c},preorderTraversal:function(a){if(a(this)===!1)return!1;var b=this.getChildNodeCount();if(b>0)for(var c=0;b>c;c++){var d=this.getChildNode(c);if(d.preorderTraversal(a)===!1)return!1}return!0},postorderTraversal:function(a){var b=this.getChildNodeCount();if(b>0)for(var c=0;b>c;c++){var d=this.getChildNode(c);d.postorderTraversal(a)}a(this)}}),Sui.Stores={},Sui.data.Store=Sui.extend(Sui.util.Observable,{cascadeProperty:!1,sortInfo:null,items:null,constructor:function(a){Sui.data.Store.superclass.constructor.call(this,a),Sui.applyProps(this,a,["cascadeProperty","sortInfo"]),this.items=[],a=a||[],Sui.isArray(a)?this.initDatas(a):Sui.isArray(a.datas)&&this.initDatas(a.datas)},setSortInfo:function(a){this.sortInfo=a,a&&this.sort()},sort:function(){Sui.log("对Store进行排序");var a=(this.items,this.sortInfo.fieldName),b="asc"==this.sortInfo.sortDesc?1:-1;this.items.sort(function(c,d){var e=c.getFieldValue(a),f=d.getFieldValue(a);return b*e.localeCompare(f)})},initDatas:function(a){if(!Sui.isEmpty(a)){this.count=a.length;var b=this;Sui.each(a,function(a){b.addRecord(b.convertDataToRecord(a))})}},convertDataToRecord:function(a){return new Sui.data.Record({store:this,data:a})},addRecord:function(a,b){Sui.isUndefinedOrNull(b)&&(b=this.getCount()),Sui.ArrayUtil.add(this.items,a,b),this.fireEvent("addRecord",new Sui.util.Event({target:this,index:b,record:a})),a.on("propertyChange",Sui.makeFunction(this,this.onRecordPropertyChange))},onRecordPropertyChange:function(a){var b=[a];this.fireEvent("recordChange",new Sui.util.Event({record:a.target,changedFields:b,index:this.indexOf(a.target)}))},indexOf:function(a){return Sui.ArrayUtil.indexOf(this.items,a)},addRecordData:function(a,b){if(Sui.isDefined(b)||(b=this.getCount()),Sui.isArray(a))for(var c=a.length-1;c>=0;c--)this.addRecordData(a[c],b);else a=this.convertDataToRecord(a),this.addRecord(a,b)},removeRecord:function(a){if(Sui.isNumber(a))var b=this.items[a];else{var b=a;a=this.indexOf(b)}Sui.ArrayUtil.removeByIndex(this.items,a),this.fireEvent("removeRecord",new Sui.util.Event({record:b,index:a})),this.fireEvent("afterRemoveRecord",new Sui.util.Event({record:b,index:a}))},setRecordDatas:function(a){this.clear();for(var b=0;b<a.length;b++)this.addRecordData(a[b])},copyRecordDatas:function(){for(var a=[],b=0;b<this.getCount();b++){var c=this.getRecord(b);a.push(c.copyData())}return a},clear:function(){for(var a=this.getCount(),b=0;a>b;b++)this.removeRecord(0)},removeRecords:function(a){var b=this;Sui.ArrayUtil.sort(a,"desc"),Sui.each(a,function(a){b.removeRecord(a)})},isEmpty:function(){return 0==this.getCount()},getCount:function(){return this.items.length},getChangedRecords:function(){for(var a=[],b=0;b<this.getCount();b++){var c=this.getRecord(b);c.existFieldChanged()&&a.push(c)}return a},getRecord:function(a){return this.items[a]},getRecords:function(a){for(var b=[],c=0;c<a.length;c++)b.push(this.getRecord(a[c]));return b},getLastRecord:function(){return this.items.length>0?this.items[this.items.length-1]:null},findRecordByNameValue:function(a,b){for(var c=0;c<this.getCount();c++){var d=this.getRecord(c);if(d.getFieldValue(a)==b)return d}return null},exchangeRecord:function(a,b){Sui.ArrayUtil.exchangeElement(this.items,a,b),this.fireEvent("exchangeRecord",{upIndex:a,downIndex:b})}}),Sui.data.Record=Sui.extend(Sui.util.Observable,{data:null,store:null,changedFields:null,constructor:function(a){Sui.data.Record.superclass.constructor.apply(this,arguments),Sui.applyProps(this,a,["data","store"])},existField:function(a){return this.data&&this.data.hasOwnProperty(a)},getFieldValue:function(a){if(this.store.cascadeProperty){a=a.split(".");for(var b=this.data[a[0]],c=1;c<a.length;c++){if(!Sui.isDefinedAndNotNull(b)||!Sui.isObject(b)){b="";break}b=b[a[c]]}return b}return this.data[a]},setFieldValue:function(a,b){var c=this.data[a];c!==b&&(this.addChangedField(a),this.data[a]=b,this.fireEvent("propertyChange",{field:a,newValue:b,oldValue:c}))},existFieldChanged:function(){return Sui.isDefinedAndNotNull(this.changedFields)&&this.changedFields.length>0},addChangedField:function(a){Sui.isUndefinedOrNull(this.changedFields)&&(this.changedFields=[]),Sui.ArrayUtil.contains(this.changedFields,a)||this.changedFields.push(a)},getFieldValues:function(a){var b={},c=this;return Sui.each(a,function(a){b[a]=c.getFieldValue(a)}),b},copyFieldValue:function(a,b){Sui.each(b,function(b){this.setFieldValue(a.getFieldValue(b))})},copyData:function(){return Sui.apply({},this.data)}}),Sui.namespace("Sui.data.Utils"),Sui.data.Utils.getRecordsFields=function(a,b){var c=this,d=[];return Sui.each(a,function(a){d.push(c.getRecordFields(a,b))}),d},Sui.data.Utils.getRecordFields=function(a,b){var c={};return Sui.each(b,function(b){c[b]=a.getFieldValue(b)}),c},Sui.data.Utils.storeDataToJson=function(a){var b=a.copyRecordDatas();return Sui.toJSON(b)},Sui.data.Utils.jsonToStoreData=function(a){return Sui.isEmpty(a)?[]:Sui.evalJSON(a)},Sui.Assert={assertArray:function(a,b){if(!Sui.isArray(a))throw b=b||"",new Error(b+"必须是数组")},assertNotEmpty:function(a,b){if(Sui.isEmpty(a))throw b=b||"",new Error(b+"不能为空")},notEmpty:function(a,b){if(Sui.isEmpty(a))throw b=b||"",new Error(b+"值为空")},assertDefinedAndNotNull:function(a,b){if(!Sui.isDefinedAndNotNull(a))throw b=b||"",new Error(b+"不能为null或undefined")}},Sui.Timekeeper=Sui.extend(Object,{startDate:null,constructor:function(){this.startDate=new Date},reStart:function(){this.startDate=new Date},getMillisecond:function(){var a=new Date;return a-this.startDate},getFormattedTime:function(){var a=this.getMillisecond(),b=Math.floor(a/1e3),c=a-1e3*b;return b+"秒"+c+"毫秒"}}),Sui.LogLevels={DEBUG:0,LOG:1,WARN:2,ERROR:3},Sui.Logger=Sui.extend(Object,{prefix:"",logLevel:Sui.LogLevels.LOG,constructor:function(a){Sui.Logger.superclass.constructor.apply(this,arguments),this.prefix=a.prefix?a.prefix:""},setLogLevel:function(a){this.logLevel=a},debug:function(a){this.logLevel>Sui.LogLevels.DEBUG||this.consoleOutput(a,"debug")},log:function(a){this.logLevel>Sui.LogLevels.LOG||this.consoleOutput(a,"log")},warn:function(a){this.logLevel>Sui.LogLevels.WARN||this.consoleOutput(a,"warn")},error:function(a){this.logLevel>Sui.LogLevels.ERROR||this.consoleOutput(a,"error")},consoleOutput:function(a){window.console&&window.console.log&&window.console.log(this.prefix+" "+a)}});var suiLog=new Sui.Logger("Sui");Sui.applyIf(Sui,{setLogLevel:function(a){suiLog.setLogLevel(a)},debugFormat:function(a){a=Sui.StringUtil.formatByNumber.apply(Sui.StringUtil,arguments),suiLog.debug(a)},logFormat:function(a){a=Sui.StringUtil.formatByNumber.apply(Sui.StringUtil,arguments),suiLog.log(a)},errorFormat:function(a){a=Sui.StringUtil.formatByNumber.apply(Sui.StringUtil,arguments),suiLog.error(a)},warnFormat:function(a){a=Sui.StringUtil.formatByNumber.apply(Sui.StringUtil,arguments),suiLog.warn(a)},debug:function(a){suiLog.debug(a)},log:function(a){suiLog.log(a)},error:function(a){suiLog.error(a)},warn:function(a){suiLog.warn(a)},debugMethodCall:function(a,b,c){var d="调用"+a+"类的"+b+"方法.";if(c){d+="参数个数:"+c.length+"\n";for(var e=0;e<c.length;e++)d+="第"+e+"个参数的值为"+c[e]+"\n"}this.debug(d)}}),function(){if(!Sui.messageResourceSet){var a=Sui.messageResourceSet={};Sui.applyIf(Sui,{getMessage:function(b){var c=a[b];return Sui.isDefinedAndNotNull(c)?c:""},setMessage:function(b,c){a[b]=c}})}}();