/*! EcafeFurniture 02-07-2014 04:07 */
Sui.ZINDEX_LAYER=20,Sui.LIST_MAX_HEIGHT=150,Sui.LIST_MIN_WIDTH=128;var cssPropties=["background-attachment","background-color","background-image","background-position","background-repeat","background","border","border-bottom","border-bottom","color","border-bottom","style","border-bottom","width","border-break","border-collapse","border-color","border-left","border-image","border-left","color","border-left","style","border-left","width","border-radius","border-right","color","border-right","style","border-right","width","border-right","border-spacing","border-style","border-top","border-top","color","border-top","style","border-top","width","border-width","bottom","caption-side","clear","clip","color","content","counter-increment","counter-reset","cue-after","cue-before","cue","cursor","direction","display","elevation","empty-cells","float","font-family","font-size","font-style","font-variant","font-weight","font","height","left","letter-spacing","line-height","list-style","image","list-style","position","list-style","type","list-style","margin-right","margin-left","margin-top","margin-bottom","margin","max-height","max-width","min-height","min-width","opacity","orphans","outline-color","outline-style","outline-width","outline","overflow","padding-top","padding-right","padding-bottom","padding-left","padding","page-break","after","page-break","before","page-break","inside","pause-after","pause-before","pause","pitch-range","pitch","play-during","position","quotes","richness","right","speak-header","speak-numeral","speak-punctuation","speak","speech-rate","stress","table-layout","text-align","text-decoration","text-indent","text-transform","top","unicode-bidi","vertical-align","visibility","voice-family","volume","white-space","widows","width","word-spacing","z-index"];Sui.cssProperties=new Sui.util.HashSet,Sui.each(cssPropties,function(a){Sui.cssProperties.add(a)}),Sui.ComponentManager={componentKey:"suiComponent",getComponent:function(a){var b=Sui.getJQ(a);return b.data(Sui.ComponentManager.componentKey)},registerComponent:function(a){if(!a.getApplyToElement())throw Sui.errorFormat("组件{0}没有对应的applyToElement",a.getComponentId());a.getApplyToElement().data(Sui.ComponentManager.componentKey,a)}},Sui.apply(Sui,{getJsonData:function(a,b){var c={type:"GET",url:a,dataType:"json",success:function(a){a=Sui.convertIfNotJSON(a),b(a)},error:function(){alert("获取数据失败,请重试")}};$.ajax(c)},convertIfNotJSON:function(a){return Sui.isString(a)?jQuery.evalJSON(a):a},focusIfCan:function(a){"hidden"==a.attr("type")||"none"==a.attr("display")||a.attr("disabled")||a.focus()},adjustHeightToKeepOtherInView:function(a,b){function c(a){var b=a.height(),c=b-d;a.height(c),a.css("overflow","auto"),Sui.logFormat("元素旧的高度={0},新的高度={1}",b,c)}a=Sui.getJQ(a);var d=this.getElementScrollLength(b);d>0&&c(a,d)},getElementScrollLength:function(a){if(Sui.isEmpty(a))return this.getWindowScrollLength();a=Sui.getJQ(a);var b=a[0].scrollHeight,c=a.height();return Sui.logFormat("元素高度={0},整个区域,包含滚动区域的高度={1}",c,b),b-c},getWindowScrollLength:function(){var a=$(window).height(),b=Sui.getJQ(Sui.getBody()).height();Sui.logFormat("窗口高度={0},页面文档的高度={1},滚动条高度={2}",a,b);var c=b-a;return c},storeState:function(a,b){a.data("suiStoreState",{attrName:a.attr(b)})},restoreState:function(a,b){var c=a.data("suiStoreState");Sui.isDefinedAndNotNull(c[b])?a.removeAttr(b):a.attr(b,c[b])},getMargins:function(a){function b(a){var b=a.css("margin-right");return Sui.isUndefinedOrNull(b)?0:parseInt(b)}return b(a,"margin-right")+b(a,"margin-left")},deepCopy:function(a){return void 0===a?void 0:null===a?null:jQuery.evalJSON(jQuery.toJSON(a))},getComponent:function(a){return Sui.ComponentManager.getComponent(a)},getCursortPosition:function(a){var b=0;if(document.selection){a.focus();var c=document.selection.createRange();c.moveStart("character",-a.value.length),b=c.text.length}else(a.selectionStart||"0"==a.selectionStart)&&(b=a.selectionStart);return b},setCursorPosition:function(a,b){if(a.setSelectionRange)a.focus(),a.setSelectionRange(b,b);else if(a.createTextRange){var c=a.createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",b),c.select()}},getClientWidth:function(){var a=document.documentElement.clientWidth;return Sui.log("可见区域宽度的值为:"+a),a},getClientHeight:function(){var a=document.documentElement.clientHeight;return Sui.log("可见区域高度的值为:"+a),a},getInputElement:function(a,b){return $('input[name="'+a+'"]',b)},getValues:function(a){var b=[];return a.each(function(a,c){b.push($(c).val())}),b},blurOnFocus:function(a){$(a.target).blur()},bindTextReturnToButtonClick:function(a,b){a.bind("keyup","return",function(){b.click()})},getFirstChild:function(a){return this.getJQ(a).children(":first-child")},setValue:function(a,b){"input"==a[0].tagName.toLowerCase()?a.val(b):a.text(b)},setOuterWidth:function(a,b){var c=a.outerWidth()-a.width();a.width(b-c)},setOuterHeight:function(a,b){var c=a.outerHeight()-a.height();a.height(b-c)},findFirstAncestorBySelector:function(a,b,c){if(!c){var d=Sui.getJQ(a).filter(b);if(d.size()>0)return d}return Sui.getJQ(a).parents(b).first()},findFirstAncestorByName:function(a,b,c){return c||Sui.getTagName(a)!=b?Sui.getJQ(a).parents(b).first():a},isCssProperty:function(a){return Sui.cssProperties.contains(a)},htmlEncode:function(a){var b=$("<div></div>").text(a),a=b.html();return b.remove(),a},htmlDecode:function(a){var b=$("<div></div>").html(a),a=b.text();return b.remove(),a},getBody:function(){var a=document;return a.body||a.documentElement},createElementByTagName:function(a){return a="input"==a?"<"+a+" />":"<"+a+"></"+a+">"},appendOrBefore:function(a,b,c){c&&c.size()>0?c.before(a):b.append(a)},indexOf:function(a,b){b=Sui.getDom(b);var c=-1;return a.each(function(a,d){return d==b?(c=a,!1):void 0}),c},getTarget:function(a,b,c){var d=null;return $(b,c).each(function(b,c){return c===a.target?(d=c,!1):void 0}),d},equals:function(a,b){return Sui.getDom(a)==Sui.getDom(b)},containsDom:function(a,b){var c=!1;return Sui.each(a,function(a){Sui.equals(a,b)&&(c=!0)}),c},isSomeChildOf:function(a,b){b=Sui.ArrayUtil.itemToArray(b);var c=!1;return Sui.each(b,function(b){return Sui.isChildOf(a,b)?(c=!0,!1):void 0}),c},isChildOf:function(a,b){a=this.getJQ(a),b=this.getJQ(b);var c=a;if(this.equals(c,b))return!0;for(c=c.parent();c.size()>0;){if(this.equals(c,b))return!0;c=c.parent()}return!1},setReadOnly:function(a){a=Sui.getJQ(a),a.attr("readOnly",!0),a.focus(function(){a.blur()})},isDisabled:function(a){return!!a.attr("disabled")},setDisabled:function(a,b){a.attr("disabled",!!b)},getCheckedElements:function(a,b){return b?a?$("input[name="+a+"]:checked",b):$("input:checked",b):$(a?"input[name="+a+"]:checked":"input:checked")},getValueByName:function(a){var b=document.getElementsByName(a),c="";return this.forEach(b,function(b){return b.name==a?(c=b.value,!1):!0},!0),c},getValueById:function(a){var b=document.getElementById(a);return b?b.value:""},checkedRadio:function(a,b,c){$("input:[name="+a+"][value="+b+"]",c).attr("checked",!0)},getCheckedRadioValue:function(a,b){if(a.contains(".")){var c="",d=$("input[type=radio]:checked",b);return this.forEach(d,function(b){return b.name==a?(c=b.value,!1):!0},!0),c}return $("input[name="+a+"]:checked",b).val()},onRadioChange:function(a,b){$("input[name="+a+"]").change(function(){b(this)})},initRadioTab:function(a,b){function c(a){Methods.forEach(b,function(b){b.radioValue==a?b.elementId&&$("#"+b.elementId).show():b.elementId&&$("#"+b.elementId).hide()})}this.onRadioChange(a,function(a){c($(a).val())});var d=this.getCheckedRadioValue(a);c(d)},ID:0,generateId:function(){return this.ID++ +"_sui_uniqueid_gen"},generateUniqueClass:function(){return this.ID++ +"_sui_dragclass_gen"},hoverEach:function(a,b,c){for(var d=0;d<a.size();d++)this.hover(a.eq(d),b,c)},hover:function(a,b,c){a.hover(function(){Sui.replaceClass(a,c,b)},function(){Sui.replaceClass(a,b,c)})},setChecked:function(a,b){Sui.isUndefined(b)&&(b=!0),this.getJQ(a).attr("checked",b)},isChecked:function(a,b){return Sui.isUndefined(b)&&(b=!0),!!this.getJQ(a).attr("checked")==!!b},isAllChecked:function(a,b){b=!!b;var c=!0;return Sui.each(a,function(a){return a&&!Sui.isChecked(a,b)?(c=!1,!1):void 0}),c},addElement:function(a,b,c){if(b=Sui.StringUtil.trim(b),Sui.isString(b))if(Sui.StringUtil.startWith(b,"<")){var d=$(b);b=this.getTagName(d)}else var d=$("<"+b+"></"+b+">");else{var d=$(b);b=d.nodeName()}if(0==c)d.prependTo(a);else{var e=this.getChildElement(a,b,c-1);1==e.size?d.insertAfter(e):d.appendTo(a)}return d},getChildElement:function(a,b,c){return a.children(b+":eq("+c+")")},setOffset:function(a,b,c){Sui.log("setOffset方法调用,screenX="+b+",screenY="+c),a.offset({left:b,top:c})},alignTo:function(a,b,c){a=Sui.getJQ(a),b=Sui.getJQ(b);var d=c.src,e=c.dest,f=$(window).width()+$(window).scrollLeft(),g=$(window).height()+$(window).scrollTop(),h=a.outerWidth(),i=a.outerHeight(),j=b.outerWidth(),k=b.outerHeight(),l=this.calcElementPosition(a,d.charAt(0)),m=this.calcElementPosition(b,e.charAt(0));Sui.log("srcH="+l+",destH="+m),m+h>f&&"l"==d.charAt(0)&&"l"==e.charAt(0)?this.moveX(a,m+j-h-l):this.moveX(a,m-l+(Sui.isNumber(c.hspan)?c.hspan:0));var n=this.calcElementPosition(a,d.charAt(1)),o=this.calcElementPosition(b,e.charAt(1));Sui.log("srcV="+n+",destV="+o),o+i>g&&o-k>i?this.moveY(a,o-k-i-n-(Sui.isNumber(c.vspan)?c.vspan:0)):this.moveY(a,o-n+(Sui.isNumber(c.vspan)?c.vspan:0))},moveX:function(a,b){var c=a.offset().left;a.offset({left:c+b})},moveY:function(a,b){var c=a.offset().top;a.offset({top:c+b})},calcElementPosition:function(a,b){return"l"==b?a.offset().left:"c"==b?a.offset().left+a.outerWidth()/2:"r"==b?a.offset().left+a.outerWidth():"t"==b?a.offset().top:"m"==b?a.offset().top+a.outerHeight()/2:"b"==b?a.offset().top+a.outerHeight():void 0},getHSpacing:function(a){return"<span style='display:inline-block;width:"+a+"px'></span>"},replaceClass:function(a,b,c){Sui.getJQ(a).addClass(c).removeClass(b)},setVisible:function(a,b){b?a.show():a.hide()},isDisplayVisible:function(a){return"none"!=a.css("display")},getColspan:function(a){var b=this.getJQ(a).attr("colspan");return Sui.isEmpty(b)?1:parseInt(b)},getRowspan:function(a){var b=this.getJQ(a).attr("rowspan");return Sui.isEmpty(b)?1:parseInt(b)},getJQ:function(a){if(Sui.isUndefinedOrNull(a))return null;if(Sui.isString(a))var b=$("#"+a);else var b=$(a);return b},getDom:function(a){return Sui.isUndefinedOrNull(a)?null:(a.tagName||(a=a[0]),a)},getTagName:function(a){return this.getDom(a).tagName.toLowerCase()},switchVisible:function(a,b,c){if(c=Sui.apply({listenerIcon:!1,userDefaultCss:!1,show:!0},c),a=this.getJQ(a),b=this.getJQ(b),c.userDefaultCss){var d=$("<b></b>").addClass("s_ico").prependTo(a);c.show?(d.addClass("s_ico_fold"),b.show()):(d.addClass("s_ico_unfold"),b.hide())}var e=a;c.listenerIcon&&(e=d),e.click(function(){if(b.toggle(),c.userDefaultCss){var e=Sui;e.isDisplayVisible(b)?e.replaceClass(d,"s_ico_unfold","s_ico_fold"):e.replaceClass(d,"s_ico_fold","s_ico_unfold")}if(c.switchAttrs){var f=c.switchAttrs[Sui.isDisplayVisible(b)?"show":"hide"];for(var g in f)"text"==g?a.text(f[g]):a.attr(g,f[g])}})}}),Sui.Align={LEFT:"left",CENTER:"center",RIGHT:"right"},Sui.KEY={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8,isSpecialKey:function(a){var b=new Array(this.UP,this.DOWN,this.RETURN,this.ESC);return Sui.ArrayUtil.contains(b,a)}},Sui.Components={componentMap:{},register:function(a,b){this.componentMap[a]=b},getComponentClass:function(a){return this.componentMap[a]},createComponentFromConfig:function(a){var b=a.compType,c=this.getComponentClass(b);return new c(a)}},Sui.Component=Sui.extend(Sui.util.Observable,{applyToTagName:"",applyToElement:null,width:null,height:null,left:null,top:null,cssPosition:null,zIndex:null,outerHeight:null,outerWidth:null,defaultClass:"",overClass:"",customClass:"",_rendered:!1,contextMenu:null,disabled:!1,visible:!0,componentId:null,children:[],constructor:function(a){this.componentId=Sui.generateId(),Sui.Component.superclass.constructor.call(this,a),a=a||{},this.initProperties(),Sui.applyProps(this,a,["contextMenu","width","height","left","zIndex","top","cssPosition","visible","disabled","customClass","overClass","defaultClass","applyToTagName"]),a.overrideDefaultRender&&Sui.applyProps(this,a,["render","beforeRender","afterRender","initEvent"]),this.initConfig(a),a.transform?this.startTransform(a.transform):a.applyTo?this.applyTo(a.applyTo):a.renderTo&&(Sui.isArray(a.renderTo)?this.renderTo.apply(this,a.renderTo):this.renderTo(a.renderTo))},initProperties:Sui.emptyFn,initConfig:Sui.emptyFn,getComponentId:function(){return this.componentId},setCustomClass:function(a){this.getApplyToElement()&&this.getApplyToElement().removeClass(this.customClass),this.customClass=a,this.applyCustomClass()},applyCustomClass:function(){this.getApplyToElement()&&this.getApplyToElement().addClass(this.customClass)},isDisabled:function(){return this.getDisabledElement()?Sui.isDisabled(this.getDisabledElement()):this.disabled},setDisabled:function(a){this.disabled!=a&&(this.disabled=a,this.applyDisabled())},applyDisabled:function(){this.isRendered()&&Sui.setDisabled(this.getDisabledElement(),this.disabled)},getDisabledElement:function(){return this.getApplyToElement()},applyDefaultClass:function(){this.getApplyToElement()&&this.getApplyToElement().addClass(this.getDefaultClass())},getDefaultClass:function(){return this.defaultClass},setWidth:function(a){this.width=a,this.applyWidth()},applyWidth:function(){this.getResizeElement()&&Sui.isDefinedAndNotNull(this.width)&&this.getResizeElement().width(this.width)},getWidth:function(){return this.getResizeElement()?this.getResizeElement().width():this.width},setHeight:function(a){this.height=a,this.applyHeight()},applyHeight:function(){this.getResizeElement()&&Sui.isDefinedAndNotNull(this.height)&&this.getResizeElement().height(this.height)},getHeight:function(){return this.getResizeElement()?this.getResizeElement().height():this.height},setOuterWidth:function(a){this.outerWidth=a,this.applyOuterWidth()},applyOuterWidth:function(){this.getResizeElement()&&Sui.isDefined(this.outerWidth)&&Sui.setOuterWidth(this.getResizeElement(),this.outerWidth)},getOuterWidth:function(){return this.getResizeElement()?this.getResizeElement().outerWidth():this.outerWidth},setOuterHeight:function(a){this.outerHeight=a,this.applyOuterHeight()},applyOuterHeight:function(){this.getResizeElement()&&Sui.isDefined(this.outerHeight)&&Sui.setOuterHeight(this.getResizeElement(),this.outerHeight)},getOuterHeight:function(){return this.getResizeElement()?this.getResizeElement().outerHeight():this.outerHeight},setLeft:function(a){this.left=a,this._applyLeft()},_applyLeft:function(){this.getTopElement()&&Sui.isDefined(this.left)&&this.getTopElement().css("left",this.left)},getLeft:function(){return this.getTopElement()?this.getTopElement().css("left"):this.left},setTop:function(a){this.top=a,this._applyTop()},_applyTop:function(){this.getTopElement()&&Sui.isDefined(this.top)&&this.getTopElement().css("top",this.top)},getTop:function(){return this.getTopElement()?this.getTopElement().css("top"):this.top},setCssPosition:function(a){this.cssPosition=a,this._applyCssPosition()},_applyCssPosition:function(){this.getTopElement()&&Sui.isDefined(this.cssPosition)&&this.getTopElement().css("position",this.cssPosition)},getCssPosition:function(){return this.getTopElement()?this.getTopElement().css("position"):this.cssPosition},applyZIndex:function(){this.getTopElement()&&Sui.isDefinedAndNotNull(this.zIndex)&&this.getTopElement().css("z-index",this.zIndex)},getResizeElement:function(){return this.applyToElement},applyTo:function(a){this.isRendered()||(this.applyToElement=Sui.getJQ(a),this.startRender(this.applyToElement.parent()))},startTransform:function(a){this.transform(a),this.afterRender(),this.initEvent()},transform:Sui.emptyFn,renderTo:function(a,b){this.isRendered()||this.startRender(Sui.getJQ(a),b)},startRender:function(a,b){this.beforeRender(a,b),this.render(a,b),this.afterRender(a,b),this.initEvent()},beforeRender:Sui.emptyFn,render:function(a,b){this.applyToTagName&&this.createApplyToElement(this.applyToTagName,a,b)},afterRender:function(){this._rendered=!0,this.applyWidth(),this.applyHeight(),this._applyLeft(),this._applyTop(),this._applyCssPosition(),this.applyZIndex(),this.applyDefaultClass(),this.applyCustomClass(),this.applyVisible(),this.applyDisabled(),Sui.ComponentManager.registerComponent(this)},isRendered:function(){return this._rendered},createApplyToElement:function(a,b,c){if(!this.getApplyToElement()||0==this.getApplyToElement().size()){Sui.Assert.notEmpty(a);var d=a;Sui.isString(a)&&(a=Sui.StringUtil.trim(a),Sui.StringUtil.startWith(a,"<")||(a=Sui.createElementByTagName(a)),d=$(a)),this.applyToElement=d,Sui.appendOrBefore(d,b,c)}return this.applyToElement},getApplyToElement:function(){return this.applyToElement},getTopElement:function(){return this.applyToElement},getDragElement:function(){return this.applyToElement},getBeforeElement:function(){return this.applyToElement},getAfterElement:function(){return this.applyToElement},containDom:function(a){var b=this.getTopElement();return Sui.isChildOf(a,b)?!0:!1},initEvent:function(){this.overClass&&this.getMouseOverElement().hover(Sui.makeFunction(this,this.onMouseOver),Sui.makeFunction(this,this.onMouseOut)),this.contextMenu&&this.getApplyToElement().bind("contextmenu",Sui.makeFunction(this,this.onContextMenu)),this.fireEvent("afterInitEvent")},beforeShowContextMenu:function(a){return this.fireEvent("beforeContextMenu",new Sui.util.Event({e:a,contextMenu:this.contextMenu}))},onContextMenu:function(a){a.preventDefault(),this.beforeShowContextMenu(a)!==!1&&this.showContextMenu(a)},showContextMenu:function(a){this.contextMenu.existVisibleItem()&&this.contextMenu.alignToAndShow(a)},getMouseOverElement:function(){return this.getApplyToElement()},onMouseOver:function(){this.getMouseOverElement().addClass(this.overClass)},onMouseOut:function(){this.getMouseOverElement().removeClass(this.overClass)},getPropertyOfElement:function(a,b){return b?"html"==a?b.html():"text"==a?b.text():Sui.isCssProperty(a)?b.css(a):b.attr(a):null},setPropertyOfElement:function(a,b,c){c&&("html"==a?c.html(b):"text"==a&&c.text(b),Sui.isCssProperty(a)?c.css(a,b):c.attr(a,b))},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},toggle:function(a){this.setVisible(a)},setVisible:function(a){Sui.isUndefined(a)&&(a=!this.visible),this.visible=a,this.applyVisible()},afterApplyVisible:Sui.emptyFn,applyVisible:function(){if(this.isRendered()){var a=this.getTopElement();a.toggle(this.visible),this.afterApplyVisible()}},isVisible:function(){if(this.isRendered()){var a=this.getTopElement();return Sui.isDisplayVisible(a)}return this.visible},destroy:function(){var a=this.getTopElement();a&&a.remove()}}),Sui.TagComponent=Sui.extend(Sui.Component,{applyToTagName:"div",html:"",textAlign:Sui.Align.LEFT,initConfig:function(a){Sui.TagComponent.superclass.initConfig.apply(this,arguments),Sui.applyProps(this,a,["html","textAlign","isRoot"])},setHtml:function(a){this.html=a,this.applyHtml()},applyHtml:function(){this.getApplyToElement()&&this.getApplyToElement().html(this.html)},setTextAlign:function(a){this.textAlign=a,this.applyTextAlign()},applyTextAlign:function(){this.getApplyToElement()&&this.setPropertyOfElement("text-align",this.textAlign,this.getApplyToElement())},afterRender:function(){Sui.TagComponent.superclass.afterRender.apply(this,arguments),this.applyTextAlign(),this.applyHtml()}}),Sui.Layout=Sui.extend(Sui.util.Observable,{children:null,childRenderToElement:null,constructor:function(a){if(Sui.Layout.superclass.constructor.call(this,a),a=a||{},this.children=new Sui.util.ArrayList,a.children){var b=Sui.ArrayUtil.itemToArray(a.children);this.children.addAll(b)}},isLayouted:function(){return null!=this.childRenderToElement},layoutContainer:function(a){this.isLayouted()||(this.childRenderToElement=a.getChildRenderTotElement(),this.renderChildrenComponent(a))},renderChildrenComponent:function(){for(var a=0;a<this.children.count();a++){var b=this.children.get(a);this.renderChildComponent(b,a)}},afterRenderContainer:Sui.emptyFn,getComponentCount:function(){return this.children.count()},getComponent:function(a){return this.children.get(a)},addComponent:function(a,b){Sui.isUndefinedOrNull(b)&&(b=this.getComponentCount()),this.children.add(a,b),this.isLayouted()&&this.renderChildComponent(a,b)},renderChildComponent:function(a,b){var c=this.childRenderToElement;b==this.getComponentCount()-1?a.renderTo(c):a.renderTo(c,this.getComponent(b+1).getBeforeElement())},indexOfComponent:function(a){return this.children.indexOf(a)},removeComponent:function(a){Sui.isNumber(a)&&(a=this.getComponent(a)),a.destroy(),this.children.remove(a)},exchangeComponent:function(a,b){var c=this.getComponent(a).getTopElement();this.getComponent(b).getTopElement().insertBefore(this.getComponent(a).getBeforeElement()),b!=a+1&&c.insertAfter(this.getComponent(b-1).getAfterElement()),this.children.exchangeElement(a,b)}}),Sui.HLayer=Sui.extend(Sui.Layout,{adjustWidth:!1,marginWidth:10,constructor:function(a){Sui.HLayer.superclass.constructor.call(this,a),Sui.applyProps(this,a,["adjustWidth"])},createChildContainer:function(a,b){var c=null;if(0==b)c=$("<div></div>").appendTo(this.childRenderToElement);else{for(var d=null,e=b-1;e>=0;e--){var f=this.getComponent(e);if(f.isRendered()){d=f.getTopElement();break}}c=null==d?$("<div></div>").appendTo(this.childRenderToElement):$("<div></div>").insertAfter(d.parent())}return this.setChildContainerStyle(c),c},setChildContainerStyle:function(a){a.css("margin",this.marginWidth)},afterRenderContainer:function(){if(this.adjustWidth){var a=this.childRenderToElement.width();Sui.log("自动调整宽度,父容器的宽度为"+a),a-=2*this.marginWidth;for(var b=0;b<this.getComponentCount();b++)this.getComponent(b).setWidth(a)}},renderChildComponent:function(a,b){var c=this.createChildContainer(a,b);a.renderTo(c)}}),Sui.Container=Sui.extend(Sui.Component,{applyToTagName:"div",layout:null,initConfig:function(a){Sui.Container.superclass.initConfig.call(this,a),a=a||{},Sui.applyProps(this,a,["layout"]),Sui.isUndefinedOrNull(this.layout)&&(this.layout=this._createDefaultLayout())},_createDefaultLayout:function(){return new Sui.Layout},render:function(a,b){Sui.Container.superclass.render.apply(this,arguments),this.createApplyToElement(this.applyToTagName,a,b),this.renderChildren(a,b)},renderChildren:function(){this.layout&&this.layout.layoutContainer(this)},afterRender:function(){Sui.Container.superclass.afterRender.apply(this,arguments),this.layout&&this.layout.afterRenderContainer(this)},addComponent:function(){this.layout.addComponent.apply(this.layout,arguments)},removeComponent:function(){this.layout.removeComponent.apply(this.layout,arguments)},indexOfComponent:function(){return this.layout.indexOfComponent.apply(this.layout,arguments)},getComponentCount:function(){return this.layout.getComponentCount()},getComponent:function(a){return this.layout.getComponent(a)},getChildRenderTotElement:function(){return this.applyToElement},destroy:function(){for(var a=0;a<this.getComponentCount();a++){var b=this.getComponent(a);Sui.isDefinedAndNotNull(b)&&b.destroy()}Sui.Container.superclass.destroy.apply(this,arguments)}}),Sui.Layer=Sui.extend(Sui.Container,{visible:!1,listenDocumentClick:!0,excludeElementsClick:null,alignmentElement:null,zIndex:Sui.ZINDEX_LAYER,alignArgs:{src:"lt",dest:"lb",hspan:0,vspan:1},alignToMouse:!1,childLayers:null,defaultClass:"sui_layer",needIframeInIE:!1,initConfig:function(a){Sui.Layer.superclass.initConfig.apply(this,arguments),a=a||{},Sui.applyProps(this,a,["zIndex","excludeElementsClick","alignArgs","alignmentElement","listenDocumentClick","needIframeInIE"]),a.component?this.addComponent(a.component):a.components&&Sui.each(a.components,Sui.makeFunction(this,this.addComponent))},render:function(){if(Sui.Layer.superclass.render.apply(this,arguments),this.getApplyToElement().css("z-index",this.zIndex),this.needIframeInIE&&Sui.isIE){var a=document.createElement("iframe");a.style.cssText="border:none;z-index: -1; position: absolute; filter: alpha(opacity=0);height:100%;width:100%; background: none transparent scroll repeat 0% 0%; top:0px;left:0px;",this.getApplyToElement().append(a)}},locate:function(a,b){this.getApplyToElement().css({top:a||0,left:b||0})},initEvent:function(){Sui.Layer.superclass.initEvent.call(this),this.listenDocumentClick&&$(document).mousedown(Sui.makeFunction(this,this.onDocMousedown))},onDocMouseWheel:function(a){Sui.log("document.click!!!"),Sui.debugMethodCall("Sui.Layer","onDocMouseWheel"),this.hideIf(a.target)},onDocMousedown:function(a){Sui.debugMethodCall("Sui.Layer","onDocMousedown"),this.hideIf(a.target)},hideIf:function(a){this.isVisible()&&this.shouldHide(a)&&(this.hide(),this.fireEvent("autoHide",this),this.afterAutoHide())},shouldHide:function(a){var b=!0;if(this.containDom(a)&&(b=!1),b&&this.excludeElementsClick&&Sui.isSomeChildOf(a,this.excludeElementsClick)&&(b=!1),b&&this.childLayers)for(var c=0;c<this.childLayers.length;c++)if(!this.childLayers[c].shouldHide(a)){b=!1;break}return b},afterAutoHide:Sui.emptyFn,setExcludeElementsClick:function(a){this.excludeElementsClick=a},addExcludeElementsClick:function(a){Sui.isUndefinedOrNull(a)||(this.excludeElementsClick=Sui.isUndefinedOrNull(this.excludeElementsClick)?[]:Sui.ArrayUtil.itemToArray(this.excludeElementsClick),a=Sui.ArrayUtil.itemToArray(a),Sui.ArrayUtil.addAll(this.excludeElementsClick,a))},removeExcludeElementsClick:function(a){Sui.isUndefinedOrNull(a)||Sui.isUndefinedOrNull(this.excludeElementsClick)||(this.excludeElementsClick=Sui.ArrayUtil.itemToArray(this.excludeElementsClick),a=Sui.ArrayUtil.itemToArray(a),Sui.ArrayUtil.removeAll(this.excludeElementsClick,a))},applyVisible:function(){this.visible&&(this.isRendered()||this.renderTo(Sui.getBody())),Sui.Layer.superclass.applyVisible.apply(this,arguments)},addChildLayer:function(a){null==this.childLayers&&(this.childLayers=[]),Sui.ArrayUtil.contains(this.childLayers,a)||this.childLayers.push(a)},removeChildLayer:function(a){this.childLayers&&Sui.ArrayUtil.remove(this.childLayers,a)},removeLastOpener:function(){this.opener&&this.opener.removeChildLayer(this)},setOpener:function(a){this.removeLastOpener(),this.opener=a,a&&a.addChildLayer(this)},findAndSetOpener:function(a){if(a){var b=$(a).parents("."+this.defaultClass),c=null;Sui.each(b,function(a){var b=Sui.getComponent($(a));return b&&b instanceof Sui.Layer?(c=b,!1):void 0}),this.setOpener(c)}},alignToAndShow:function(a){this.findAndSetOpener(a),this.show(),this.alignToElement(a),this.alignToElement(a)},alignToElement:function(a){var b=this.getTopElement();if(this.alignToMouse){var c=a;Sui.setOffset(b,c.pageX,c.pageY)}else a?Sui.alignTo(b,a,this.alignArgs):this.alignmentElement&&Sui.alignTo(b,this.alignmentElement,this.alignArgs)}}),Sui.Window=Sui.extend(Sui.Layer,{defaultClass:"sui_window",listenDocumentClick:!1,title:"",titleElement:null,contentContainer:null,contextPanel:null,html:"",bindPosition:!1,initConfig:function(a){Sui.Window.superclass.initConfig.apply(this,arguments),Sui.applyProps(this,a,["title","html"])},render:function(){Sui.Window.superclass.render.apply(this,arguments),this.renderWindowHeader()},renderWindowHeader:function(){var a=this.getApplyToElement();a.addClass("std_pop");{var b=$("<table></table>").appendTo(a),c=$("<tr></tr>").appendTo(b),d=$("<td></td>").appendTo(c),e=$('<div actor="drager" class="pop_title move"></div> ').appendTo(d),f=(this.titleElement=$('<span actor="title">添加用户</span>').appendTo(e),$(' <b actor="closer" class="close _close"></b>').appendTo(e),$("<tr></tr>").appendTo(b)),g=this.contentContainer=$('<td class="pop_main" ></td>').appendTo(f);this.contextPanel=$('<div class="pop_content" ></div>').appendTo(g)}},afterRender:function(){Sui.Window.superclass.afterRender.apply(this,arguments),this.applyTitle(),this.applyContent()},getResizeElement:function(){return this.contentContainer},applyContent:function(){this.isRendered()&&this.html&&this.contextPanel.html(this.html)},applyTitle:function(){this.isRendered()&&this.titleElement.text(this.title)},show:function(){this.isRendered()||this.renderTo(Sui.getBody()),Sui.Window.superclass.show.apply(this,arguments)}}),Sui.LoadMaskIcon=window.contextPath?window.contextPath+"/images/loading-big.gif":"/images/loading-big.gif",Sui.LoadMask=Sui.extend(Sui.Component,{target:null,src:"",constructor:function(a){Sui.LoadMask.superclass.constructor.apply(this,a),Sui.applyProps(this,a,["target","src"]),this.src||(this.src=Sui.LoadMaskIcon),this.renderTo(null,null)},render:function(){var a=10;this.applyToElement=$("<div class='sui_loadMask' style='position:relative'></div>").css("z-index",a).hide().insertAfter(this.target);$("<img />").attr("src",this.src).appendTo(this.applyToElement)},afterApplyVisible:function(){this.applyToElement.width(Sui.getJQ(this.target).width()),this.applyToElement.height(Sui.getJQ(this.target).height())}});